{"mappings":"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","sources":["public/js/index.js","public/js/login.js","public/js/alerts.js","public/js/mapbox.js","public/js/updateSettings.js","public/js/stripe.js"],"sourcesContent":["import { login, signup, forgotPassword, recoverAccount } from './login';\r\nimport { displayMap } from './mapbox';\r\nimport { logout } from './login';\r\nimport { updateSettings } from './updateSettings';\r\nimport { bookTour } from './stripe';\r\nimport { showAlert } from './alerts';\r\n\r\nconst getInputsForm = form => {\r\n  const dataArr = [...new FormData(form)];\r\n  const data = Object.fromEntries(dataArr);\r\n  return data;\r\n};\r\n\r\nconst removeInputsForm = form => {\r\n  const inputs = form.querySelectorAll('input');\r\n  inputs.forEach(el => (el.value = ''));\r\n};\r\n\r\n// DOM ELEMENTS\r\nconst mapBox = document.querySelector('#map');\r\nconst loginForm = document.querySelector('.form--login');\r\nconst singUpForm = document.querySelector('.form--signup');\r\nconst forgotPasswordForm = document.querySelector('.form--forgotPassword');\r\nconst recoverAccountForm = document.querySelector('.form--recoverAccount');\r\nconst logOutBtn = document.querySelector('.nav__el--logout');\r\nconst userDataForm = document.querySelector('.form-user-data');\r\nconst userPasswordForm = document.querySelector('.form-user-password');\r\nconst bookBtn = document.querySelector('#book-tour');\r\n\r\n// DELEGATION\r\nif (mapBox) {\r\n  const locations = JSON.parse(mapBox.dataset.locations);\r\n  displayMap(locations);\r\n}\r\n\r\nif (singUpForm) {\r\n  singUpForm.addEventListener('submit', function(e) {\r\n    e.preventDefault();\r\n    const name = document.getElementById('name').value;\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('passwordConfirm').value;\r\n    signup({ name, email, password, passwordConfirm });\r\n  });\r\n}\r\n\r\nif (loginForm) {\r\n  loginForm.addEventListener('submit', function(e) {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    login(email, password);\r\n  });\r\n}\r\n\r\nif (forgotPasswordForm) {\r\n  forgotPasswordForm.addEventListener('submit', function(e) {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    forgotPassword(email);\r\n  });\r\n}\r\n\r\nif (recoverAccountForm) {\r\n  recoverAccountForm.addEventListener('submit', function(e) {\r\n    e.preventDefault();\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('passwordConfirm').value;\r\n    const token = window.location.href.split('/').at(-1);\r\n    recoverAccount(password, passwordConfirm, token);\r\n  });\r\n}\r\n\r\nif (logOutBtn) {\r\n  logOutBtn.addEventListener('click', logout);\r\n}\r\n\r\nif (userDataForm) {\r\n  userDataForm.addEventListener('submit', function(e) {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append('name', document.getElementById('name').value);\r\n    form.append('email', document.getElementById('email').value);\r\n    form.append('photo', document.getElementById('photo').files[0]);\r\n    // const data = getInputsForm(userDataForm);\r\n    updateSettings(form, 'data');\r\n  });\r\n}\r\n\r\nif (userPasswordForm) {\r\n  userPasswordForm.addEventListener('submit', async function(e) {\r\n    e.preventDefault();\r\n    document.querySelector('.btn--save-password').textContent = 'Updating...';\r\n    const data = getInputsForm(userPasswordForm);\r\n    await updateSettings(JSON.stringify(data), 'password');\r\n    document.querySelector('.btn--save-password').textContent = 'Save password';\r\n    removeInputsForm(userPasswordForm);\r\n  });\r\n}\r\n\r\nif (bookBtn) {\r\n  bookBtn.addEventListener('click', async function(e) {\r\n    e.target.textContent = 'Processing...';\r\n    const tourId = e.target.dataset.tourId;\r\n    await bookTour(tourId);\r\n  });\r\n}\r\n\r\nconst alertMessage = document.querySelector('body').dataset.alert;\r\nif (alertMessage) showAlert('success', alertMessage, 20);\r\n","import { showAlert } from './alerts';\r\n\r\nexport const signup = async ({ name, email, password, passwordConfirm }) => {\r\n  try {\r\n    const res = await fetch('/api/v1/users/signup', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        email,\r\n        password,\r\n        passwordConfirm\r\n      })\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(data.message);\r\n\r\n    if (data.status === 'success') {\r\n      showAlert('success', `Welcome! ${name}`);\r\n      setTimeout(() => location.assign('/'), 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.message);\r\n  }\r\n};\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await fetch('/api/v1/users/login', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        email,\r\n        password\r\n      })\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(data.message);\r\n\r\n    if (data.status === 'success') {\r\n      showAlert('success', 'Logged in successfully!');\r\n      setTimeout(() => location.assign('/'), 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.message);\r\n  }\r\n};\r\nexport const forgotPassword = async email => {\r\n  try {\r\n    const res = await fetch('/api/v1/users/forgotPassword', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        email\r\n      })\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(data.message);\r\n\r\n    if (data.status === 'success') {\r\n      showAlert('success', 'token was sent to your email!', 10);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.message);\r\n  }\r\n};\r\n\r\nexport const recoverAccount = async (password, passwordConfirm, token) => {\r\n  try {\r\n    const res = await fetch(`/api/v1/users/resetPassword/${token}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        password,\r\n        passwordConfirm\r\n      })\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(data.message);\r\n\r\n    if (data.status === 'success') {\r\n      showAlert('success', 'Logged in successfully!');\r\n      setTimeout(() => location.assign('/'), 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.message);\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await fetch('/api/v1/users/logout');\r\n    const data = await res.json();\r\n\r\n    if (data.status === 'success') location.assign('/');\r\n  } catch (err) {\r\n    showAlert('error', 'Error logging out! Try again');\r\n  }\r\n};\r\n","// type is 'success' or 'error'\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\nexport const showAlert = (type, msg, time = 5) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  setTimeout(hideAlert, time * 1000);\r\n};\r\n","export const displayMap = locations => {\r\n  mapboxgl.accessToken =\r\n    'pk.eyJ1IjoiYWJuZXItZGV2IiwiYSI6ImNsZDNudmo3cDAzcnQzcHBjYTdvcjZkYWEifQ.-mHsAuY7iZdt3W7WqBkCRQ';\r\n\r\n  const map = new mapboxgl.Map({\r\n    container: 'map',\r\n    style: 'mapbox://styles/abner-dev/cld3va24d000e01rrlbuu5871',\r\n    scrollZoom: false\r\n  });\r\n\r\n  const bounds = new mapboxgl.LngLatBounds();\r\n\r\n  const createPopup = options => {\r\n    new mapboxgl.Popup({\r\n      offset: 30,\r\n      closeOnClick: false\r\n    })\r\n      .setLngLat(options.coordinates)\r\n      .setHTML(\r\n        `<p class='popup-${options.day}'>Day ${options.day} ${\r\n          options.description\r\n        }</p>`\r\n      )\r\n      .addTo(map);\r\n  };\r\n\r\n  locations.forEach(location => {\r\n    // Create marker\r\n    const element = document.createElement('div');\r\n    element.classList.add('marker');\r\n\r\n    element.addEventListener('click', function() {\r\n      if (document.querySelector(`.popup-${location.day}`)) return;\r\n      createPopup(location);\r\n    });\r\n\r\n    // Add marker to map\r\n    new mapboxgl.Marker({ element, anchor: 'bottom' })\r\n      .setLngLat(location.coordinates)\r\n      .addTo(map);\r\n\r\n    // Add popup to map\r\n    createPopup(location);\r\n\r\n    // Extends map bounds to include current location\r\n    bounds.extend(location.coordinates);\r\n  });\r\n\r\n  map.fitBounds(bounds, {\r\n    padding: {\r\n      top: 200,\r\n      bottom: 200,\r\n      left: 100,\r\n      right: 100\r\n    }\r\n  });\r\n};\r\n","import { showAlert } from './alerts';\r\n\r\n// type is either 'password' or 'data'\r\nexport const updateSettings = async (data, type) => {\r\n  try {\r\n    let url;\r\n    let optionsFetch = {\r\n      method: 'PATCH',\r\n      body: data\r\n    };\r\n\r\n    if (type === 'password') {\r\n      url = '/api/v1/users/updateMyPassword';\r\n      optionsFetch.headers = {\r\n        'Content-Type': 'application/json'\r\n      };\r\n    } else {\r\n      url = '/api/v1/users/updateMe';\r\n    }\r\n\r\n    const res = await fetch(url, optionsFetch);\r\n    const dataAPI = await res.json();\r\n\r\n    if (!res.ok) throw new Error(dataAPI.message);\r\n\r\n    if (dataAPI.status === 'success') {\r\n      showAlert('success', `${type.toUpperCase()} update successfully!`);\r\n      setTimeout(() => location.assign('/me'), 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.message);\r\n  }\r\n};\r\n","import { showAlert } from './alerts';\r\n\r\nconst stripe = Stripe(\r\n  'pk_test_51MVfI4FXr2koWylriEG8sStwOuvADLGu5K6gIAl4H5sE7ZuyxkB4zyElQRRYAckQZjWaCl0ByZ2DLA6mxqvqk1P200fpeeYHZR'\r\n);\r\n\r\nexport const bookTour = async tourId => {\r\n  try {\r\n    // 1) Get checkout session from API\r\n    const res = await fetch(`/api/v1/bookings/checkout-session/${tourId}`);\r\n\r\n    const session = await res.json();\r\n\r\n    // 2) Create checkout form + chanre credit card\r\n    await stripe.redirectToCheckout({\r\n      sessionId: session.data.session.id\r\n    });\r\n  } catch (err) {\r\n    showAlert('error', err.message);\r\n  }\r\n};\r\n"],"names":[],"version":3,"file":"bundle.js.map","sourceRoot":"../../"}